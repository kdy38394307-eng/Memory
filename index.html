<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Memory</title>
  <link rel="stylesheet" href="style.css">


</head>
<body>
  <div id="header">
    <h1>Memory</h1>
  </div>
  
  <div class="container">
    <div id="mainMenu" class="main-menu">
      <div class="menu-grid">
        <button id="fortuneBtn" class="fortune-btn">
          <div class="btn-content">
            <span class="btn-icon">ğŸ”®</span>
            <span class="btn-text">ì˜¤ëŠ˜ì˜ ìš´ì„¸</span>
          </div>
        </button>
        <button id="lottoBtn" class="lotto-btn">
          <div class="btn-content">
            <span class="btn-icon">ğŸ°</span>
            <span class="btn-text">Lotto</span>
          </div>
        </button>
        <button id="dinnerBtn" class="dinner-btn">
          <div class="btn-content">
            <span class="btn-icon">ğŸ½ï¸</span>
            <span class="btn-text">ì €ë…ë©”ë‰´ ì¶”ì²œ</span>
          </div>
        </button>
      </div>
    </div>
    
    <div id="backBtn" class="back-button hidden">
      <button id="backBtnInner">â† ë’¤ë¡œ ê°€ê¸°</button>
    </div>
    
    <div id="result" class="result-box"></div>
    
    <div id="welcomeMessage" class="welcome-message" style="display: none;">
      <h2>ğŸ‰ Memoryì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!</h2>
      <p>ë¡œê·¸ì¸í•˜ì—¬ ì˜¤ëŠ˜ì˜ ìš´ì„¸ì™€ ë¡œë˜ ë²ˆí˜¸ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.</p>
    </div>
  </div>
  
  <div class="visitor-counter">
    <span>ì˜¤ëŠ˜ ë°©ë¬¸ì: <span id="visitorCount">0</span>ëª…</span>
  </div>

  <div class="login-box">
    <button id="registerBtn">íšŒì›ê°€ì…</button>
    <button id="loginBtn">ë¡œê·¸ì¸</button>
  </div>

  <!-- íšŒì›ê°€ì… ëª¨ë‹¬ -->
  <div id="registerModal" class="modal hidden">
    <div class="modal-content">
      <h2>ğŸ“§ íšŒì›ê°€ì…</h2>
      <div class="form-group">
        <label>ì´ë©”ì¼ ì£¼ì†Œ</label>
        <div class="email-input">
          <input type="text" id="emailLocal" placeholder="ì´ë©”ì¼">
          <span>@</span>
          <select id="emailDomain">
            <option value="gmail.com">gmail.com</option>
            <option value="naver.com">naver.com</option>
            <option value="daum.net">daum.net</option>
            <option value="kakao.com">kakao.com</option>
            <option value="custom">ì§ì ‘ì…ë ¥</option>
          </select>
        </div>
        <input type="text" id="customDomain" placeholder="ë„ë©”ì¸ ì§ì ‘ì…ë ¥" class="hidden">
      </div>
      <div class="modal-buttons">
        <button id="sendCodeBtn" class="primary">ì¸ì¦ë²ˆí˜¸ ë°œì†¡</button>
        <button id="cancelRegisterBtn" class="secondary">ì·¨ì†Œ</button>
      </div>
    </div>
  </div>

  <!-- ë¡œê·¸ì¸ ëª¨ë‹¬ -->
  <div id="loginModal" class="modal hidden"> 
    <div class="modal-content">
      <h2>ğŸ”‘ ë¡œê·¸ì¸</h2>
      <div class="form-group">
        <label>ì´ë©”ì¼ ì£¼ì†Œ</label>
        <div class="email-input">
          <input type="text" id="loginEmailLocal" placeholder="ì´ë©”ì¼">
          <span>@</span>
          <select id="loginEmailDomain">
            <option value="gmail.com">gmail.com</option>
            <option value="naver.com">naver.com</option>
            <option value="daum.net">daum.net</option>
            <option value="kakao.com">kakao.com</option>
            <option value="custom">ì§ì ‘ì…ë ¥</option>
          </select>
        </div>
        <input type="text" id="loginCustomDomain" placeholder="ë„ë©”ì¸ ì§ì ‘ì…ë ¥" class="hidden">
      </div>
      <div class="form-group">
        <label>ë¹„ë°€ë²ˆí˜¸ (4ìë¦¬)</label>
        <input type="password" id="loginPassword" placeholder="4ìë¦¬ ë¹„ë°€ë²ˆí˜¸" maxlength="4">
      </div>
      <div class="modal-buttons">
        <button id="processLoginBtn" class="primary">ë¡œê·¸ì¸</button>
        <button id="cancelLoginBtn" class="secondary">ì·¨ì†Œ</button>
      </div>
    </div>
  </div>

  <button id="kakaoLoginBtn">ì¹´ì¹´ì˜¤ë¡œ ì‹œì‘í•˜ê¸°</button>

<script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.8/kakao.min.js"></script>
<script>
  // 1) SDK ì´ˆê¸°í™” (JavaScript í‚¤ ì‚¬ìš©)
  Kakao.init("069c998a3ffec6b163249d03a52f2b51"); 
  console.log("Kakao SDK initialized:", Kakao.isInitialized());

  // 2) ë²„íŠ¼ í´ë¦­ ì‹œ ë¡œê·¸ì¸ ì‹œë„
  document.getElementById("kakaoLoginBtn").addEventListener("click", function() {
    Kakao.Auth.authorize({
      redirectUri: "http://localhost:3000/auth/kakao/callback", // ì½œë°± URL
      scope: "profile_nickname", // ë‹‰ë„¤ì„ë§Œ ë™ì˜ë°›ìŒ
      state: Math.random().toString(36).substring(2) // CSRF ë°©ì§€ìš©
    });
  });
</script>

<!-- Firebase SDKs -->
<script type="module">
  // Firebase v9+ (ëª¨ë“ˆ ë°©ì‹)
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-analytics.js";
  import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

  // Firebase ì„¤ì •
  const firebaseConfig = {
    apiKey: "AIzaSyAB_YYUYaPFvAah9y04O9YtGslC1fIw7oQ",
    authDomain: "memory-21fb7.firebaseapp.com",
    projectId: "memory-21fb7",
    storageBucket: "memory-21fb7.firebasestorage.app",
    messagingSenderId: "45594315097",
    appId: "1:45594315097:web:c7a1f8609130ee7c4f6448",
    measurementId: "G-7F4WGD024F"
  };

  // Firebase ì´ˆê¸°í™”
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const db = getFirestore(app);

  // ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì„±ê³µ í›„ ì‚¬ìš©ì ì •ë³´ ì €ì¥
  async function saveUser(kakaoId, nickname) {
    await setDoc(doc(db, "users", String(kakaoId)), {
      nickname: nickname || null,
      createdAt: new Date()
    });
    console.log("ì‚¬ìš©ì ì €ì¥ ì™„ë£Œ!");
  }

  // ì˜ˆì‹œ: ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ì‹¤í–‰
  // saveUser("1234567890", "í™ê¸¸ë™");
</script>

  <!-- ì¸ì¦ë²ˆí˜¸ ëª¨ë‹¬ -->
  <div id="verificationModal" class="modal hidden">
    <div class="modal-content">
      <h2>ğŸ“± ì¸ì¦ë²ˆí˜¸ ì…ë ¥</h2>
      <div class="form-group">
        <label>ì¸ì¦ë²ˆí˜¸ (6ìë¦¬)</label>
        <input type="text" id="verificationInput" placeholder="123456" maxlength="6">
      </div>
      <div class="modal-buttons">
        <button id="verifyBtn" class="primary">í™•ì¸</button>
        <button id="cancelVerifyBtn" class="secondary">ì·¨ì†Œ</button>
      </div>
    </div>
  </div>

  <!-- ì•Œë¦¼ ëª¨ë‹¬ -->
  <div id="alertModal" class="modal hidden">
    <div class="modal-content alert">
      <div class="alert-icon" id="alertIcon">â„¹ï¸</div>
      <p id="alertMessage">ë©”ì‹œì§€</p>
      <button id="alertOkBtn" class="primary">í™•ì¸</button>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>